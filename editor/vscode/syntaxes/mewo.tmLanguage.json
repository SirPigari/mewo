{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Mewo",
	"scopeName": "source.mewo",
	"fileTypes": [
		"mewo",
		"Mewofile"
	],
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#conditionals"
		},
		{
			"include": "#attributes"
		},
		{
			"include": "#labels"
		},
		{
			"include": "#echo-command"
		},
		{
			"include": "#control-flow"
		},
		{
			"include": "#variable-assignment"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#interpolation"
		},
		{
			"include": "#booleans"
		},
		{
			"include": "#numbers"
		},
		{
			"include": "#arrays"
		},
		{
			"include": "#commands"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.semicolon.mewo",
					"match": ";.*$"
				},
				{
					"name": "comment.line.double-slash.mewo",
					"match": "//.*$"
				}
			]
		},
		"conditionals": {
			"patterns": [
				{
					"name": "keyword.control.conditional.mewo",
					"match": "#if\\s*\\([^)]*\\)"
				},
				{
					"name": "keyword.control.conditional.mewo",
					"match": "#(else|endif)\\b"
				},
				{
					"name": "keyword.control.platform.mewo",
					"match": "#(windows|linux|macos|unix)\\b"
				},
				{
					"name": "keyword.control.conditional.mewo",
					"match": "#exists\\s*\\([^)]*\\)"
				}
			]
		},
		"attributes": {
			"patterns": [
				{
					"name": "entity.name.tag.attribute.exec.mewo",
					"begin": "#exec\\(",
					"end": "\\)",
					"patterns": [
						{
							"include": "#strings"
						}
					]
				},
				{
					"name": "entity.name.tag.attribute.mewo",
					"match": "#(shell|cwd|ignorefail|expect|timeout|once|save|env|assert)\\s*\\([^)]*\\)"
				},
				{
					"name": "entity.name.tag.attribute.mewo",
					"match": "#(shell|ignorefail|once)\\b"
				},
				{
					"name": "keyword.other.feature.mewo",
					"match": "#features?\\s*\\([^)]*\\)"
				},
				{
					"name": "keyword.other.builtin.mewo",
					"match": "#(defined|len)\\s*\\([^)]*\\)"
				}
			]
		},
		"labels": {
			"patterns": [
				{
					"name": "entity.name.function.label.mewo",
					"match": "^\\s*([a-zA-Z_][a-zA-Z0-9_-]*)\\s*:",
					"captures": {
						"1": {
							"name": "entity.name.function.label.mewo"
						}
					}
				}
			]
		},
		"echo-command": {
			"patterns": [
				{
					"name": "meta.echo.mewo",
					"begin": "^(\\s*)(echo)\\s+",
					"beginCaptures": {
						"2": {
							"name": "support.function.builtin.mewo"
						}
					},
					"end": "$",
					"patterns": [
						{
							"include": "#strings"
						},
						{
							"include": "#interpolation"
						},
						{
							"name": "string.unquoted.echo.mewo",
							"match": "[^$\"']+"
						}
					]
				}
			]
		},
		"control-flow": {
			"patterns": [
				{
					"name": "keyword.control.mewo",
					"match": "\\b(goto|call)\\b"
				}
			]
		},
		"variable-assignment": {
			"patterns": [
				{
					"match": "^\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\s*(=)",
					"captures": {
						"1": {
							"name": "variable.other.assignment.mewo"
						},
						"2": {
							"name": "keyword.operator.assignment.mewo"
						}
					}
				},
				{
					"match": "^\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\[([^\\]]+)\\]\\s*(=)",
					"captures": {
						"1": {
							"name": "variable.other.assignment.mewo"
						},
						"2": {
							"name": "constant.numeric.index.mewo"
						},
						"3": {
							"name": "keyword.operator.assignment.mewo"
						}
					}
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.mewo",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"include": "#interpolation"
						},
						{
							"name": "constant.character.escape.mewo",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.quoted.single.mewo",
					"begin": "'",
					"end": "'",
					"patterns": [
						{
							"include": "#interpolation"
						},
						{
							"name": "constant.character.escape.mewo",
							"match": "\\\\."
						}
					]
				}
			]
		},
		"interpolation": {
			"patterns": [
				{
					"name": "variable.other.interpolation.exec.mewo",
					"begin": "\\$\\{#exec\\(",
					"end": "\\)\\}",
					"patterns": [
						{
							"include": "#strings"
						}
					]
				},
				{
					"name": "variable.other.interpolation.len.mewo",
					"match": "\\$\\{#len\\([^)]+\\)\\}"
				},
				{
					"name": "variable.other.interpolation.mewo",
					"match": "\\$\\{[^{}]*\\}"
				},
				{
					"name": "variable.other.positional.mewo",
					"match": "\\$[0-9]+"
				},
				{
					"name": "variable.other.exitcode.mewo",
					"match": "\\$\\?"
				}
			]
		},
		"booleans": {
			"patterns": [
				{
					"name": "constant.language.boolean.mewo",
					"match": "\\b(true|false)\\b"
				}
			]
		},
		"numbers": {
			"patterns": [
				{
					"name": "constant.numeric.mewo",
					"match": "\\b-?[0-9]+(\\.[0-9]+)?\\b"
				}
			]
		},
		"arrays": {
			"patterns": [
				{
					"name": "meta.array.mewo",
					"begin": "\\[",
					"beginCaptures": {
						"0": {
							"name": "punctuation.definition.array.begin.mewo"
						}
					},
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.array.end.mewo"
						}
					},
					"patterns": [
						{
							"include": "#strings"
						},
						{
							"include": "#booleans"
						},
						{
							"include": "#numbers"
						},
						{
							"include": "#interpolation"
						}
					]
				}
			]
		},
		"commands": {
			"patterns": [
				{
					"name": "support.function.builtin.mewo",
					"match": "\\b(echo)\\b"
				}
			]
		}
	}
}